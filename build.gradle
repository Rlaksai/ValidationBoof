apply plugin: 'idea'
apply plugin: 'java'
apply plugin: 'maven'

group = 'org.boofcv'
version = '0.28'
sourceCompatibility = 1.8

repositories {
    mavenCentral()
    mavenLocal()

    maven {
        url = "https://oss.sonatype.org/content/repositories/snapshots/"
    }
}

sourceSets {
    main {
        java {
            srcDir 'src/java'
        }
    }
    test {
        java {
            srcDir 'test/java'
        }
    }
}

task regressionJar(type: Jar) {
    manifest {
        attributes 'Implementation-Title': 'Validation Boof',
                'Implementation-Version': version,
                'Main-Class': 'regression.GenerateRegressionData'
    }

    outputs.upToDateWhen { false }

    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar

    doLast {
        archivePath.renameTo(file('regression.jar'))
    }
}

dependencies {
    compile files("lib/ProjectBUBO.jar")

    ['boofcv-core','boofcv-swing'].each { String a -> compile group: 'org.boofcv', name: a, version: '0.28' }

    compile group: 'com.google.guava', name: 'guava', version: '17.0'

    testCompile group: 'junit', name: 'junit', version: '4.12'
    compile group: 'commons-io', name: 'commons-io', version: '2.6'
}

task wrapper(type: Wrapper) {
    gradleVersion = '4.3'
}

idea {
    project {
        jdkName = '1.8 (64bit)'
        languageLevel = '1.8'
    }

    module {
        name = "BoofCV Validation"
    }
}

